!!!5
%html
  %head
    %meta{charset: "utf-8"}/
    %link{href: "css/main.css", media: "screen", rel: "stylesheet"}/
    %link{href: "css/timeline.css", media: "screen", rel: "stylesheet"}/
    %link{href: "css/social.css", media: "screen", rel: "stylesheet"}/
    %script{src: "js/iosBridge.js"}
    %script{src: "js/jquery.js"}
    %script{src: "js/fastclick.js"}
    %script{src: "js/ui.js"}
    %script{src: "js/controls.js"}
    :javascript

      var onPlay = function () {
        isPaused = false;
        beginTimelineScrolling();
      };

      var onPause = function () {
        isPaused = true;
        stopTimelineScrolling();
      };

      var setMovieInfo = function (title, author) {
        $('.nav-movie-title').text(title);
      };

      // move the progress bar using timecode
      var setTimecode = function (seconds) {
      	var w = (seconds * $('.progressbar').width()) / movieDuration;

        if (!isTimelineScrolling)
          $('.timeline-body').css('left', timelinePositionWithTimecode(seconds)+'%');
      }

      var onNewNotice = function (timecode, id, title, short_content, category) {
        $('.timeline-last-notice .title').text(title);
        $('.timeline-last-notice .content').text(short_content);
        $('.timeline-last-notice').attr('data-notice-id', id);
        $('.timeline-cat-icon').show(0);
        $('.timeline-cat-icon img').attr('src', 'images/cat-'+category+'.png');
        addNoticeOnTimeline(timecode, category);
      }

      var onNewComment = function (comment, author, timecode) {
        $('.timeline-last-notice .title').text(author);
        $('.timeline-last-notice .content').text(comment);
        $('.timeline-cat-icon img').attr('src', 'images/cat-comment.png');
        addNoticeOnTimeline(timecode, 'comment');
      }

      var setUserInfo = function (name, imageUrl) {
        $('.profile-name').text(name);
        $('.navbar-tabs a.nav-profile').css('background-image', 'url('+imageUrl+')');
      }

      $(function() {
          FastClick.attach(document.body);
      });

      
  %body
    / HOME SCREEN
    .container.container-home
      .home-header
        
      / .chapter-slider
      /   .last-chapter.chapter
      /     %h4.chapter-title.with-font La découverte
      /     %p.chapter-content Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ull
      .video-controls
        / %button#prev-chapter
        / %button#rewind
        %button#play
        / %button#forward
        / %button#next-chapter

      .timeline-last-notice
        .timeline-cat-icon
          %img{ src: 'images/cat-impact.png' }
        %h3.title.with-font 
        %p.content 
        / .display-notice-btn
        /   En savoir +
      .timeline
        .timeline-body-container
          .timeline-body
        
        .timeline-current-time

    / / TIMELINE SCREEN
    / .container.container-timeline
    /   .timeline-head
      

    / SOCIAL SCREEN
    .container.container-social
      .social-form
        %div
          %label
            %span.label-main.with-font Votre message
            %span.helper 140 caractères maximum
          %textarea#message{ placeholder: 'Votre message' }
        %div
          %button.button-link.send Poster
          %label
            %span.label-main.with-font Destinataires
          %select#dest
            %option Tous mes amis

        

    / DOC SCREEN
    .container.container-doc
      .doc-head
        %h2.home-movie-title.with-font.doc-movie-title Métropolis
        %h3 Documentation
      .doc-main.doc-home
        .doc-search

        .doc-block.doc-movie-info
        .doc-block.doc-themes
        .doc-block.doc-analyses
        .doc-block.doc-impact
        .doc-block.doc-anecdotes
        .doc-block.doc-social

    / ROADMAP SCREEN
    .container.container-roadmap

    / SETTINGS SCREEN
    .container.container-settings

    %nav.navbar
      .navbar-title.with-font{ onclick: 'calliOSFunction("quit", [])'}
        SC
        %span.blue> 0
        PE

      .nav-movie-title Métropolis
      .navbar-tabs
        %a.nav-home{href: ".container-home", onclick: "calliOSFunction('goHome', [])"}
        / %a.nav-notif{href: ".container-timeline", onclick: "calliOSFunction('goTimeline', [])"}
        / %span.unread-counter 0
        %a.nav-social{href: ".container-social", onclick: "calliOSFunction('goSocial', [])"}
        %a.nav-doc{href: ".container-doc", onclick: "calliOSFunction('goDoc', [])"}
        %a.nav-profile
          .profile-name

    .profile-nav
      %a.nav-movie{ href: ".container-movie" } Mon film
      %a.nav-roadmap{ href: ".container-roadmap" } Mon parcours
      %a.nav-settings{ href: ".container-settings" } Réglages 


    %script{src: "js/raphael.js"}
    