<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <link href='css/main.css' media='screen' rel='stylesheet'>
    <link href='css/timeline.css' media='screen' rel='stylesheet'>
    <link href='css/social.css' media='screen' rel='stylesheet'>
    <link href='css/map.css' media='screen' rel='stylesheet'>
    <link href='css/retina.css' media='screen' rel='stylesheet'>
    <script src='js/iosBridge.js'></script>
    <script src='js/jquery.js'></script>
    <script src='js/hammer.min.js'></script>
    <script src='js/jquery.gsap.min.js'></script>
    <script src='js/TweenLite.min.js'></script>
    <script src='js/fastclick.js'></script>
    <script src='js/ui.js'></script>
    <script src='js/doc.js'></script>
    <script src='js/social.js'></script>
    <script src='js/map.js'></script>
    <script src='js/controls.js'></script>
    <script>
      var ROOT_API_URL = 'http://www.scope.dev';
      var FAST_FORWARD = false;
      var FAST_REWIND  = false;
      var NOTICES = [];
      var USER_FACEBOOK_ID = null;
      var CURRENT_VIEWED_NOTICE = null;
      
      var LAST_NOTICE_TIMECODE = -9999;
      
      var oldTimecode = 0;
      var currentTimecode = 0;
      
      var onPlay = function () {
        isPaused = false;
        beginTimelineScrolling();
        $('.play').hide(0);
        $('.pause').show(0);
      };
      
      var onPause = function () {
        isPaused = true;
        stopTimelineScrolling();
        $('.play').show(0);
        $('.pause').hide(0);
      };
      
      var setMovieInfo = function (id, title, author) {
        MOVIE_ID = id;
        $('.nav-movie-title').text(title);
      
        getAllNotices(id);
      };
      
      // move the progress bar using timecode
      var setTimecode = function (seconds) {
      
        oldTimecode = currentTimecode;
        currentTimecode = seconds;
      
        // $('.timeline-body, .cursor').css('left', timelineOffsetWithTimecode(seconds)+'%');
      }
      
      var onNewNotice = function (timecode, endTimecode, id, title, short_content, category, color) {
      
        console.log('Last timecode : '+LAST_NOTICE_TIMECODE+', current : '+timecode);
      
        
      
        if (Number(timecode) - LAST_NOTICE_TIMECODE < 60 ) {
          addNoticeOnMap(timecode, id, category, title, true);
          return;
        }
      
        addNoticeOnMap(timecode, id, category, title, false);
      
        LAST_NOTICE_TIMECODE = Number(timecode);
        CURRENT_VIEWED_NOTICE = id;
      
        $('.timeline-last-notice .title').text(title);
        $('.timeline-last-notice .content').text(short_content);
        $('.timeline-last-notice').attr('data-notice-id', id);
        $('.timeline-cat-icon').show(0);
        $('.timeline-cat-icon img').attr('src', 'images/cat-'+category+'@2x.png');
        $('.container-home').css('background', 'url(images/samples/notices/'+id+'_big.jpg) no-repeat');
        $('.view-grid-container .timeline-last-notice').css('background', 'url(images/samples/notices/'+id+'_big.jpg) no-repeat');
        addNoticeOnTimeline(timecode, endTimecode, id, category, title);
      
      
        if ($('.container-home').is(':hidden')) {
          $('.nav-home').addClass('unread');
        }
      
      
        NOTICES[id] = { title: title, short_content: short_content, category: category, color: color, timecode: timecode };
      }
      
      var onNewComment = function (facebook_id, comment, author, timecode) {
        addNoticeOnMap(timecode, null, 'comment', author);
        $('.timeline-last-notice .title').text(author);
        $('.timeline-last-notice .content').text('"'+comment+'"');
        $('.timeline-cat-icon img').attr('src', 'http://graph.facebook.com/'+facebook_id+'/picture?type=normal');
        addNoticeOnTimeline(timecode, Number(timecode)+20, null, 'comment', author);
      }
      
      var setUserInfo = function (id, name, imageUrl) {
        $('.profile-name').text(name);
        $('.navbar-tabs .nav-profile .image').css('background-image', 'url('+imageUrl+')');
        $('.container-social-notlogged').remove();
        $('.container-social .profile-image').attr('src', 'http://graph.facebook.com/'+id+'/picture?type=normal');
        IS_LOGGED_IN = true;
        USER_FACEBOOK_ID = id;
      }
      
      $(function() {
          FastClick.attach(document.body);
      
          addNoticeOnTimeline(0, 0, 0, 'scope', 'Bienvenue');
      });
    </script>
  </head>
  <body>
    <div class='navbar-doc'>
      <div class='doc-breadcrumb'>
        <div class='item item-1'>Documentation</div>
        <div class='item item-2'>Thèmes clés</div>
        <div class='item item-3'>Déshumanisation</div>
      </div>
      <div class='doc-search'>
        <input id='doc-search-input' placeholder='Recherche rapide'>
      </div>
    </div>
    <!-- HOME SCREEN -->
    <div class='container container-home'>
      <div class='socials'>
        <div class='facebook' onclick='calliOSFunction("shareNotice", ["facebook", CURRENT_VIEWED_NOTICE])'></div>
        <div class='twitter' onclick='calliOSFunction("shareNotice", ["twitter", CURRENT_VIEWED_NOTICE])'></div>
      </div>
      <div class='view-nav'>
        <div class='view-line active'></div>
        <div class='view-grid'></div>
      </div>
      <div class='view-line-container'>
        <div class='timeline-header'></div>
        <!-- .chapter-slider -->
        <!-- .last-chapter.chapter -->
        <!-- %h4.chapter-title.with-font La découverte -->
        <!-- %p.chapter-content Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ull -->
        <div class='video-controls'>
          <!-- %button#prev-chapter -->
          <!-- %button#rewind -->
          <button class='play'></button>
          <button class='pause'></button>
          <!-- %button#forward -->
          <!-- %button#next-chapter -->
        </div>
        <div class='timeline-last-notice'>
          <div class='timeline-cat-icon'>
            <img src='images/cat-scope@2x.png'>
          </div>
          <h3 class='title with-font'>Bienvenue</h3>
          <p class='content'>Ici s'afficheront les différentes notifications liées au film</p>
          <div class='display-notice-btn'>
            en savoir +
          </div>
          <div class='replay-btn'></div>
        </div>
        <div class='timeline'>
          <div class='timeline-body-container' id='timeline-body-container'>
            <!-- .cursor -->
            <div class='timeline-body' id='timeline-body'>
              <!-- .timeline-notice-title Test test -->
            </div>
          </div>
          <div class='timeline-current-time'></div>
        </div>
      </div>
      <div class='view-grid-container'>
        <div class='video-controls'>
          <!-- %button#prev-chapter -->
          <!-- %button#rewind -->
          <button class='play'></button>
          <button class='pause'></button>
          <!-- %button#forward -->
          <!-- %button#next-chapter -->
        </div>
        <div class='timeline-last-notice'>
          <div class='timeline-cat-icon'>
            <img src='images/cat-scope@2x.png'>
          </div>
          <h3 class='title with-font'>Bienvenue</h3>
          <p class='content'>Ici s'afficheront les différentes notifications liées au film</p>
          <div class='display-notice-btn'>
            en savoir +
          </div>
          <div class='replay-btn'></div>
        </div>
        <div class='timeline'>
          <div class='mask'></div>
          <div class='timeline-body-container' id='timeline-body-container'>
            <!-- .cursor -->
            <div class='grid-timeline' id='grid-timeline'>
              <!-- .timeline-notice-block.timeline-notice-block-themes -->
              <!-- %img.icon{ src: 'images/cat-themes.png' } -->
              <!-- .title L'enfer -->
              <!-- .timeline-notice-block -->
              <!-- %img.icon{ src: 'images/cat-anecdotes.png' } -->
              <!-- .title L'enfer -->
              <!-- .timeline-notice-time 00:56:00 -->
            </div>
          </div>
          <div class='timeline-current-time'></div>
        </div>
      </div>
    </div>
    <!-- / TIMELINE SCREEN -->
    <!-- .container.container-timeline -->
    <!-- .timeline-head -->
    <!-- SOCIAL SCREEN -->
    <div class='container container-social'>
      <div class='step step-1'>
        <div class='social-head'>
          <div class='step-nb'><span class='blue'>1</span>/3
          </div>
          <div class='title with-font'>QUEL INTERVALLE ?</div>
          <p>Champ d'application de votre message</p>
        </div>
        <div class='interval-chooser'>
          <div class='line'></div>
          <div class='cursor' id='social-interval-cursor'>
            <div class='begin-time'>00:51:00</div>
            <div class='end-time'>00:51:00</div>
          </div>
        </div>
        <button class='button-link next' ontouchstart='socialNextStep()'>Valider</button>
      </div>
      <div class='step step-2'>
        <div class='social-head'>
          <div class='step-nb'><span class='blue'>2</span>/3
          </div>
          <div class='title with-font'>VOTRE MESSAGE...</div>
          <p>140 caractères maximum</p>
        </div>
        <img class='profile-image'>
        <div class='social-form'>
          <textarea id='message' placeholder=''></textarea>
        </div>
        <button class='button-link next' ontouchstart='socialNextStep()'>Valider</button>
      </div>
      <div class='step step-3'>
        <div class='social-head'>
          <div class='step-nb'><span class='blue'>3</span>/3
          </div>
          <div class='title with-font'>PUBLIER SUR...</div>
          <div class='publication-select'>
            <div class='item item-scope checked'>Scope</div>
            <div class='item item-fb'>Facebook</div>
          </div>
        </div>
        <div class='social-form'></div>
        <button class='button-link send'>Poster</button>
      </div>
    </div>
    <div class='container container-social container-social-notlogged'>
      <div class='info'>Connectez-vous à l'aide de votre compte Facebook pour pouvoir partager votre expérience avec les gens autour de vous.</div>
    </div>
    <!-- DOC SCREEN -->
    <div class='container container-doc'>
      <div class='doc-head'>
        <!-- %h2.home-movie-title.with-font.doc-movie-title Métropolis -->
        <!-- %h3 Documentation -->
      </div>
      <div class='doc-main doc-home'>
        <div class='doc-search'></div>
        <div class='doc-block doc-movie-info'>
          <div class='doc-block-title'>Fiche du film</div>
        </div>
        <div class='doc-block doc-themes' data-category-id='2' data-category='themes'>
          <div class='doc-block-title'>Themes clés</div>
        </div>
        <div class='doc-block doc-analyse' data-category-id='4' data-category='analyses'>
          <div class='doc-block-title'>Analyses</div>
        </div>
        <div class='doc-block doc-social'>
          <div class='doc-block-title'>Communauté</div>
        </div>
        <div class='doc-block doc-anecdotes' data-category-id='5' data-category='anecdotes'>
          <div class='doc-block-title'>Anecdotes</div>
        </div>
        <div class='doc-block doc-impact' data-category-id='1' data-category='impact'>
          <div class='doc-block-title'>
            Impact
            <br>
            sur la culture
          </div>
        </div>
      </div>
      <!-- .doc-category -->
      <!-- .slider -->
      <!-- .slide-counter -->
      <!-- %span.current> 1 -->
      <!-- \/ -->
      <!-- %span.total -->
      <!-- .cat-icon -->
      <!-- .title Déshumanisation -->
      <!-- .short-content L’usine elle-même, telle Chronos dévorant ses enfants, se nourrit de chair humaine. Lorsqu’ils ne périssent pas physiquement, les ouvriers sont tout simplement anéantis dans leur âme et leur singularité. -->
    </div>
    <!-- ROADMAP SCREEN -->
    <div class='container container-map'>
      <div class='map-navbar'>
        <div class='select-view'>
          <div class='view-missed'>à voir</div>
          <div class='view-seen selected'>vues</div>
        </div>
      </div>
      <div class='map-main' id='map-main'>
        <!-- .map-col -->
        <!-- .map-col-wrapper -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-themes.png' } -->
        <!-- .title Déshumanisation -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-analyses.png' } -->
        <!-- .title L'enfer -->
        <!-- .map-col -->
        <!-- .map-col-wrapper -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-anecdotes.png' } -->
        <!-- .title Réalisateur acharné -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-themes.png' } -->
        <!-- .title Thème du double -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-analyses.png' } -->
        <!-- .title L'enfer -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-analyses.png' } -->
        <!-- .title L'enfer -->
        <!-- .map-col -->
        <!-- .map-col-wrapper -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-comment.png' } -->
        <!-- .title Léo Hetsch -->
        <!-- .map-notice -->
        <!-- %img.icon{ src: 'images/cat-themes.png' } -->
        <!-- .title Thème du doublest -->
      </div>
      <div class='map-timeline' id='map-timeline'></div>
    </div>
    <div class='additional-content'>
      <div class='content'>
        <img class='image' src='images/samples/doc/add-sample-1.jpg'>
        <div class='right'>
          <div class='title'>Saturne dévorant ses enfants</div>
          <div class='more'></div>
          <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
        </div>
      </div>
      <div class='content'>
        <img class='image' src='images/samples/doc/add-sample-2.jpg'>
        <div class='right'>
          <div class='title'>Chronos</div>
          <div class='more'></div>
          <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
        </div>
      </div>
      <div class='content'>
        <img class='image' src='images/samples/doc/add-sample-2.jpg'>
        <div class='right'>
          <div class='title'>Chronos</div>
          <div class='more'></div>
          <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
        </div>
      </div>
      <div class='content'>
        <img class='image' src='images/samples/doc/add-sample-2.jpg'>
        <div class='right'>
          <div class='title'>Chronos</div>
          <div class='more'></div>
          <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
        </div>
      </div>
    </div>
    <!-- SETTINGS SCREEN -->
    <div class='container container-settings'></div>
    <nav class='navbar'>
      <div class='navbar-title with-font' onclick='calliOSFunction("quit", [])'>
        SC<span class='blue'>0</span>PE
      </div>
      <div class='nav-movie-title'>Métropolis</div>
      <div class='navbar-tabs'>
        <a class='active nav-home' href='.container-home' onclick="calliOSFunction('goHome', [])"></a>
        <!-- %a.nav-notif{href: ".container-timeline", onclick: "calliOSFunction('goTimeline', [])"} -->
        <!-- %span.unread-counter 0 -->
        <a class='nav-social' href='.container-social' onclick="calliOSFunction('goSocial', [])"></a>
        <a class='nav-doc' href='.container-doc' onclick="calliOSFunction('goDoc', [])"></a>
        <a class='nav-profile'>
          <div class='profile-name'></div>
          <div class='image'></div>
        </a>
      </div>
    </nav>
    <div class='profile-nav'>
      <a class='nav-movie' href='.container-movie'>Mon film</a>
      <a class='nav-roadmap' href='.container-roadmap'>Mon parcours</a>
      <a class='nav-settings' href='.container-settings'>Réglages</a>
    </div>
    <script src='js/raphael.js'></script>
  </body>
</html>
