<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <link href='css/main.css' media='screen' rel='stylesheet'>
    <link href='css/timeline.css' media='screen' rel='stylesheet'>
    <link href='css/social.css' media='screen' rel='stylesheet'>
    <script src='js/iosBridge.js'></script>
    <script src='js/jquery.js'></script>
    <script src='js/hammer.min.js'></script>
    <script src='js/jquery.gsap.min.js'></script>
    <script src='js/TweenLite.min.js'></script>
    <script src='js/fastclick.js'></script>
    <script src='js/ui.js'></script>
    <script src='js/doc.js'></script>
    <script src='js/controls.js'></script>
    <script>
      var ROOT_API_URL = 'http://www.scope.dev';
      var FAST_FORWARD = false;
      var FAST_REWIND  = false;
      var NOTICES = [];
      
      var LAST_NOTICE_TIMECODE = -9999;
      
      var oldTimecode = 0;
      var currentTimecode = 0;
      
      var onPlay = function () {
        isPaused = false;
        beginTimelineScrolling();
      };
      
      var onPause = function () {
        isPaused = true;
        stopTimelineScrolling();
      };
      
      var setMovieInfo = function (id, title, author) {
        MOVIE_ID = id;
        $('.nav-movie-title').text(title);
        getDocumentation(id);
      };
      
      // move the progress bar using timecode
      var setTimecode = function (seconds) {
      
        oldTimecode = currentTimecode;
        currentTimecode = seconds;
      
        // $('.timeline-body, .cursor').css('left', timelineOffsetWithTimecode(seconds)+'%');
      }
      
      var onNewNotice = function (timecode, endTimecode, id, title, short_content, category, color) {
      
        console.log('Last timecode : '+LAST_NOTICE_TIMECODE+', current : '+timecode);
      
        if (Number(timecode) - LAST_NOTICE_TIMECODE < 150 ) {
          return;
        }
      
        LAST_NOTICE_TIMECODE = Number(timecode);
      
        $('.timeline-last-notice .title').text(title);
        $('.timeline-last-notice .content').text(short_content);
        $('.timeline-last-notice').attr('data-notice-id', id);
        $('.timeline-cat-icon').show(0);
        $('.timeline-cat-icon img').attr('src', 'images/cat-'+category+'.png');
        $('.view-line-container .timeline-last-notice .title').css('color', '#'+color);
        $('.container-home').css('background', 'url(images/samples/notices/'+id+'_big.jpg) no-repeat center top');
        $('.view-grid-container .timeline-last-notice').css('background', 'url(images/samples/notices/'+id+'_big.jpg) no-repeat center top');
        addNoticeOnTimeline(timecode, endTimecode, id, category);
      
        if ($('.container-home').is(':hidden')) {
          $('.nav-home').addClass('unread');
        }
      
        NOTICES[id] = { title: title, short_content: short_content, category: category, color: color, timecode: timecode };
      }
      
      var onNewComment = function (comment, author, timecode) {
        $('.timeline-last-notice .title').text(author);
        $('.timeline-last-notice .title').css('color', '#00ecea');
        $('.timeline-last-notice .content').text('"'+comment+'"');
        $('.timeline-cat-icon img').attr('src', 'images/cat-comment.png');
        addNoticeOnTimeline(timecode, null, 'comment');
      }
      
      var setUserInfo = function (name, imageUrl) {
        $('.profile-name').text(name);
        $('.navbar-tabs .nav-profile .image').css('background-image', 'url('+imageUrl+')');
        $('.container-social-notlogged').remove();
        IS_LOGGED_IN = true;
      }
      
      $(function() {
          FastClick.attach(document.body);
      });
    </script>
  </head>
  <body>
    <div class='navbar-doc'>
      <span class='with-font title'>Documentation</span>
    </div>
    <!-- HOME SCREEN -->
    <div class='container container-home'>
      <div class='view-nav'>
        <div class='view-line active'></div>
        <div class='view-grid'></div>
      </div>
      <div class='view-line-container'>
        <div class='timeline-header'></div>
        <!-- .chapter-slider -->
        <!-- .last-chapter.chapter -->
        <!-- %h4.chapter-title.with-font La découverte -->
        <!-- %p.chapter-content Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ull -->
        <div class='video-controls'>
          <!-- %button#prev-chapter -->
          <!-- %button#rewind -->
          <button class='play'></button>
          <button class='pause'></button>
          <!-- %button#forward -->
          <!-- %button#next-chapter -->
        </div>
        <div class='timeline-last-notice'>
          <div class='timeline-cat-icon'>
            <img src='images/cat-impact.png'>
          </div>
          <h3 class='title'></h3>
          <p class='content'></p>
          <div class='display-notice-btn'>
            en savoir +
          </div>
          <div class='replay-btn'></div>
        </div>
        <div class='timeline'>
          <div class='timeline-body-container' id='timeline-body-container'>
            <!-- .cursor -->
            <div class='timeline-body' id='timeline-body'></div>
          </div>
          <div class='timeline-current-time'></div>
        </div>
        <div class='additional-content'>
          <div class='content'>
            <img class='image' src='images/samples/doc/add-sample-1.jpg'>
            <div class='right'>
              <div class='title'>Saturne dévorant ses enfants</div>
              <div class='more'></div>
              <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
            </div>
          </div>
          <div class='content'>
            <img class='image' src='images/samples/doc/add-sample-2.jpg'>
            <div class='right'>
              <div class='title'>Chronos</div>
              <div class='more'></div>
              <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
            </div>
          </div>
          <div class='content'>
            <img class='image' src='images/samples/doc/add-sample-2.jpg'>
            <div class='right'>
              <div class='title'>Chronos</div>
              <div class='more'></div>
              <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
            </div>
          </div>
          <div class='content'>
            <img class='image' src='images/samples/doc/add-sample-2.jpg'>
            <div class='right'>
              <div class='title'>Chronos</div>
              <div class='more'></div>
              <p>Saturne dévorant un de ses fils, également appelée Saturne dévorant son enfant ou simplement Saturne, est une des Peintures noires de Francisco de Goya, peinte entre 1819 et 1823 directement sur les murs de sa maison appelée la Quinta del Sordo (« Maison de campagne du Sourd ») dans les environs de Madrid. La peinture a été transférée sur une to....</p>
            </div>
          </div>
        </div>
      </div>
      <div class='view-grid-container'>
        <div class='video-controls'>
          <button class='play'></button>
          <button class='pause'></button>
        </div>
        <div class='timeline-last-notice'>
          <div class='timeline-last-notice-wrapper'>
            <div class='timeline-cat-icon'>
              <img>
            </div>
            <h3 class='title with-font'>Grid view</h3>
            <p class='content'></p>
            <div class='display-notice-btn'>
              En savoir +
            </div>
          </div>
        </div>
        <div class='notice-grid'>
          <div class='slider' id='notice-grid-slider'>
            <!-- .chapter-section -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .chapter-section -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .notice-block -->
            <!-- .notice-block -->
          </div>
        </div>
        <div class='chapter-timeline-container'>
          <div class='chapter-timeline'></div>
        </div>
        <!-- .timeline -->
        <!-- .timeline-body-container -->
        <!-- .cursor -->
        <!-- .timeline-body -->
        <!-- .timeline-current-time -->
      </div>
    </div>
    <!-- / TIMELINE SCREEN -->
    <!-- .container.container-timeline -->
    <!-- .timeline-head -->
    <!-- SOCIAL SCREEN -->
    <div class='container container-social'>
      <div class='social-form'>
        <div>
          <label>
            <span class='label-main with-font'>Votre message</span>
            <span class='helper'>140 caractères maximum</span>
          </label>
          <textarea id='message' placeholder='Votre message'></textarea>
        </div>
        <div>
          <button class='button-link send'>Poster</button>
          <label>
            <span class='label-main with-font'>Destinataires</span>
          </label>
          <select id='dest'>
            <option>Tous mes amis</option>
          </select>
        </div>
      </div>
    </div>
    <div class='container container-social container-social-notlogged'>
      <div class='info'>Connectez-vous à l'aide de votre compte Facebook pour pouvoir partager votre expérience avec les gens autour de vous.</div>
    </div>
    <!-- DOC SCREEN -->
    <div class='container container-doc'>
      <div class='doc-head'>
        <!-- %h2.home-movie-title.with-font.doc-movie-title Métropolis -->
        <!-- %h3 Documentation -->
      </div>
      <div class='doc-main doc-home'>
        <div class='doc-search'></div>
        <div class='doc-block doc-movie-info'>
          <div class='doc-block-title'>Fiche du film</div>
        </div>
        <div class='doc-block doc-themes' data-category-id='2' data-category='themes'>
          <div class='doc-block-title'>Thèmes clés</div>
        </div>
        <div class='doc-block doc-analyse' data-category-id='4' data-category='analyses'>
          <div class='doc-block-title'>Analyses</div>
        </div>
        <div class='doc-block doc-impact' data-category-id='1' data-category='impact'>
          <div class='doc-block-title'>Impact sur la culture</div>
        </div>
        <div class='doc-block doc-anecdotes' data-category-id='5' data-category='anecdotes'>
          <div class='doc-block-title'>Anecdotes</div>
        </div>
        <div class='doc-block doc-social'>
          <div class='doc-block-title'>Communauté</div>
        </div>
      </div>
    </div>
    <!-- ROADMAP SCREEN -->
    <div class='container container-roadmap'></div>
    <!-- SETTINGS SCREEN -->
    <div class='container container-settings'></div>
    <nav class='navbar'>
      <div class='navbar-title with-font' onclick='calliOSFunction("quit", [])'>
        SC<span class='blue'>0</span>PE
      </div>
      <div class='nav-movie-title'>Métropolis</div>
      <div class='navbar-tabs'>
        <a class='active nav-home' href='.container-home' onclick="calliOSFunction('goHome', [])"></a>
        <!-- %a.nav-notif{href: ".container-timeline", onclick: "calliOSFunction('goTimeline', [])"} -->
        <!-- %span.unread-counter 0 -->
        <a class='nav-social' href='.container-social' onclick="calliOSFunction('goSocial', [])"></a>
        <a class='nav-doc' href='.container-doc' onclick="calliOSFunction('goDoc', [])"></a>
        <a class='nav-profile'>
          <div class='profile-name'></div>
          <div class='image'></div>
        </a>
      </div>
    </nav>
    <div class='profile-nav'>
      <a class='nav-movie' href='.container-movie'>Mon film</a>
      <a class='nav-roadmap' href='.container-roadmap'>Mon parcours</a>
      <a class='nav-settings' href='.container-settings'>Réglages</a>
    </div>
    <script src='js/raphael.js'></script>
  </body>
</html>
