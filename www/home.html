<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <link href='css/main.css' media='screen' rel='stylesheet'>
    <link href='css/timeline.css' media='screen' rel='stylesheet'>
    <link href='css/social.css' media='screen' rel='stylesheet'>
    <script src='js/iosBridge.js'></script>
    <script src='js/jquery.js'></script>
    <script src='js/fastclick.js'></script>
    <script src='js/ui.js'></script>
    <script src='js/controls.js'></script>
    <script>
      var oldTimecode = 0;
      var currentTimecode = 0;
      
      var onPlay = function () {
        isPaused = false;
        beginTimelineScrolling();
      };
      
      var onPause = function () {
        isPaused = true;
        stopTimelineScrolling();
      };
      
      var setMovieInfo = function (title, author) {
        $('.nav-movie-title').text(title);
      };
      
      // move the progress bar using timecode
      var setTimecode = function (seconds) {
      
        oldTimecode = currentTimecode;
        currentTimecode = seconds;
      
        if (currentTimecode - oldTimecode > 2)
          $('.timeline-body').css('left', timelinePositionWithTimecode(seconds)+'%');
      }
      
      var onNewNotice = function (timecode, id, title, short_content, category) {
        $('.timeline-last-notice .title').text(title);
        $('.timeline-last-notice .content').text(short_content);
        $('.timeline-last-notice').attr('data-notice-id', id);
        $('.timeline-cat-icon').show(0);
        $('.timeline-cat-icon img').attr('src', 'images/cat-'+category+'.png');
        addNoticeOnTimeline(timecode, category);
      }
      
      var onNewComment = function (comment, author, timecode) {
        $('.timeline-last-notice .title').text(author);
        $('.timeline-last-notice .content').text(comment);
        $('.timeline-cat-icon img').attr('src', 'images/cat-comment.png');
        addNoticeOnTimeline(timecode, 'comment');
      }
      
      var setUserInfo = function (name, imageUrl) {
        $('.profile-name').text(name);
        $('.navbar-tabs a.nav-profile').css('background-image', 'url('+imageUrl+')');
      }
      
      $(function() {
          FastClick.attach(document.body);
      });
    </script>
  </head>
  <body>
    <!-- HOME SCREEN -->
    <div class='container container-home'>
      <div class='view-nav'>
        <div class='view-line'></div>
        <div class='view-grid'></div>
      </div>
      <div class='view-line-container'>
        <div class='home-header'></div>
        <!-- .chapter-slider -->
        <!-- .last-chapter.chapter -->
        <!-- %h4.chapter-title.with-font La découverte -->
        <!-- %p.chapter-content Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ull -->
        <div class='video-controls'>
          <!-- %button#prev-chapter -->
          <!-- %button#rewind -->
          <button class='play'></button>
          <!-- %button#forward -->
          <!-- %button#next-chapter -->
        </div>
        <div class='timeline-last-notice'>
          <div class='timeline-cat-icon'>
            <img src='images/cat-impact.png'>
          </div>
          <h3 class='title with-font'></h3>
          <p class='content'></p>
          <!-- .display-notice-btn -->
          <!-- En savoir + -->
        </div>
        <div class='timeline'>
          <div class='timeline-body-container'>
            <div class='cursor'></div>
            <div class='timeline-body'></div>
          </div>
          <div class='timeline-current-time'></div>
        </div>
      </div>
      <div class='view-grid-container'>
        <div class='home-header'></div>
        <!-- .chapter-slider -->
        <!-- .last-chapter.chapter -->
        <!-- %h4.chapter-title.with-font La découverte -->
        <!-- %p.chapter-content Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ull -->
        <div class='video-controls'>
          <!-- %button#prev-chapter -->
          <!-- %button#rewind -->
          <button class='play'></button>
          <!-- %button#forward -->
          <!-- %button#next-chapter -->
        </div>
        <div class='timeline-last-notice'>
          <div class='timeline-cat-icon'>
            <img src='images/cat-impact.png'>
          </div>
          <h3 class='title with-font'>Grid view</h3>
          <p class='content'></p>
          <!-- .display-notice-btn -->
          <!-- En savoir + -->
        </div>
        <!-- .timeline -->
        <!-- .timeline-body-container -->
        <!-- .cursor -->
        <!-- .timeline-body -->
        <!-- .timeline-current-time -->
      </div>
    </div>
    <!-- / TIMELINE SCREEN -->
    <!-- .container.container-timeline -->
    <!-- .timeline-head -->
    <!-- SOCIAL SCREEN -->
    <div class='container container-social'>
      <div class='social-form'>
        <div>
          <label>
            <span class='label-main with-font'>Votre message</span>
            <span class='helper'>140 caractères maximum</span>
          </label>
          <textarea id='message' placeholder='Votre message'></textarea>
        </div>
        <div>
          <button class='button-link send'>Poster</button>
          <label>
            <span class='label-main with-font'>Destinataires</span>
          </label>
          <select id='dest'>
            <option>Tous mes amis</option>
          </select>
        </div>
      </div>
    </div>
    <!-- DOC SCREEN -->
    <div class='container container-doc'>
      <div class='doc-head'>
        <h2 class='home-movie-title with-font doc-movie-title'>Métropolis</h2>
        <h3>Documentation</h3>
      </div>
      <div class='doc-main doc-home'>
        <div class='doc-search'></div>
        <div class='doc-block doc-movie-info'></div>
        <div class='doc-block doc-themes'></div>
        <div class='doc-block doc-analyses'></div>
        <div class='doc-block doc-impact'></div>
        <div class='doc-block doc-anecdotes'></div>
        <div class='doc-block doc-social'></div>
      </div>
    </div>
    <!-- ROADMAP SCREEN -->
    <div class='container container-roadmap'></div>
    <!-- SETTINGS SCREEN -->
    <div class='container container-settings'></div>
    <nav class='navbar'>
      <div class='navbar-title with-font' onclick='calliOSFunction("quit", [])'>
        SC<span class='blue'>0</span>PE
      </div>
      <div class='nav-movie-title'>Métropolis</div>
      <div class='navbar-tabs'>
        <a class='nav-home' href='.container-home' onclick="calliOSFunction('goHome', [])"></a>
        <!-- %a.nav-notif{href: ".container-timeline", onclick: "calliOSFunction('goTimeline', [])"} -->
        <!-- %span.unread-counter 0 -->
        <a class='nav-social' href='.container-social' onclick="calliOSFunction('goSocial', [])"></a>
        <a class='nav-doc' href='.container-doc' onclick="calliOSFunction('goDoc', [])"></a>
        <a class='nav-profile'>
          <div class='profile-name'></div>
        </a>
      </div>
    </nav>
    <div class='profile-nav'>
      <a class='nav-movie' href='.container-movie'>Mon film</a>
      <a class='nav-roadmap' href='.container-roadmap'>Mon parcours</a>
      <a class='nav-settings' href='.container-settings'>Réglages</a>
    </div>
    <script src='js/raphael.js'></script>
  </body>
</html>
